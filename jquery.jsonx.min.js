/*!
 * jQuery JSONX v1.0.0
 * http://forchoon.com/projects/javascript/jquery-jsonx/
 *
 * Copyright 2011, Alasdair Mercer
 * Licensed under the GPL Version 3 license.
 */
(function(a,b){var c={attributes:function(b){var c=b[0],d=0,e,f=c.nodeType!==1||!a.isXMLDoc(c),g={};if(c.attributes.length>0){for(;d<c.attributes.length;d++){e=c.attributes[d].name;e=f&&a.propFix[e]||e;g[e]=b.attr(e)}}return g}};var d={build:function(b){function c(b,d){var e=[],f={};if(a.isArray(b)){if(!b.length||a.type(b[0])!=="string"){a.error("jsonx.build: Syntax error")}f=a(document.createElement(b[0]));if(b.length>1){if(a.isPlainObject(b[1])){f.attr(b[1]);if(b.length>2){e=Array.prototype.slice.call(b,2)}}else{e=Array.prototype.slice.call(b,1)}if(e.length){c(e,f)}}}else if(a.type(b)==="string"){d.append(b)}return d}if(a.type(b)==="string"){b=d.parse(b)}if(!a.isArray(b)){a.error("jsonx.build: Type error")}return c(b,a("<x/>")).contents()},parse:function(d){function e(b){var d=[];b.each(function(){var b=a(this),f={},g=b.contents(),h=0;Array.prototype.push.call(d,this.nodeName.toLowerCase());f=c.attributes(b);if(!a.isEmptyObject(f)){Array.prototype.push.call(d,f)}if(g.length){for(;h<g.length;h++){if(g[h].nodeType===3){Array.prototype.push.call(d,g[h].textContent)}else{Array.prototype.push.call(d,e(a(g[h])))}}}});return d}if(d===b){d=this}switch(a.type(d)){case"string":return JSON.parse(d);case"object":return e(a(d))}a.error("jsonx.parse: Type error")},stringify:function(c){if(c===b){c=d.parse(this)}else if(a.type(c)==="object"&&c.jquery){c=d.parse(c)}else if(!a.isArray(c)){a.error("jsonx.stringify: Type error")}return JSON.stringify(c)}};a.fn.jsonx=function(a){if(d[a]){return d[a].apply(this,Array.prototype.slice.call(arguments,1))}return d.build.apply(this,arguments)}})(jQuery)